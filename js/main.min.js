var butter={initialize:function(){this.polyfill(),i18n.init({fallbackLng:"en"},function(){$("html").i18n();var a=$("#get-app").attr("data-version"),b=$("#get-app").attr("data-version-android");$(".download .btn-main").html(i18n.t("download.text",{postProcess:"sprintf",sprintf:[a]})),$(".download .btn-main.icon-android").html(i18n.t("download.text",{postProcess:"sprintf",sprintf:[b]}))})},polyfill:function(){for(var a=["ms","moz","webkit","o"],b=0;b<a.length&&!window.requestAnimationFrame;b++)window.requestAnimationFrame=window[a[b]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a[b]+"CancelAnimationFrame"]||window[a[b]+"CancelRequestAnimationFrame"]},detectUA:function(a,b){return/Mac/.test(a)?"mac":/Win/.test(a)?"win":/Android/.test(b)?"android":/Lin/.test(a)?/x86_64/.test(a)?"lin-64":"lin-32":void 0},getAndroidVersion:function(){$.get("https://ci.butterproject.org/android/mobile/release",function(a){var b=a.mobile.release["armeabi-v7a"].versionName,c="https://get.butterproject.org/android/"+b+"/mobile-armeabi-v7a-release-"+b+".apk";0==b.indexOf("0")&&(b=b.substring(2,b.length)),$('a[data-os="Android"]').attr("href",c).html(i18n.t("download.text",{defaultValue:"Download Beta %s",postProcess:"sprintf",sprintf:[b]}))},"json")},updateDownloads:function(a,b){document.body.className+=" "+(this.detectUA(a,b)||"nope")},updateStatus:function(a,b){$.get(b,function(b){$(a).addClass(b.status.indicator)},"json")},smoothScroll:function(){$("a[data-scroll][href*=#]:not([href=#])").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var a=$(this.hash);if(a=a.length?a:$("[name="+this.hash.slice(1)+"]"),a.length)return $("html,body").animate({scrollTop:a.offset().top},800),!1}})},snow:function(){function a(){for(var a=0;h>a;a++)k.push({x:Math.random()*l,y:Math.random()*m,size:1+3*Math.random(),weight:Math.random()*h,angle:360*Math.random()});b(),window.addEventListener("resize",b),window.addEventListener("mousemove",c),void 0!==window.orientation&&window.addEventListener("deviceorientation",d),document.body.insertBefore(p,document.body.firstChild),window.requestAnimationFrame(e)}function b(){l=window.innerWidth,m=window.innerHeight,n=l/2,p.width=l,p.height=m}function c(a){o.x=a.x||a.clientX,o.y=a.y||a.clientY,i.x=f(o.x-n,-n,n,4,-4)}function d(a){null!==a.gamma&&(window.orientation%180?i.x=f(a.beta,-60,60,4,-4):i.x=f(a.gamma,-60,60,-4,4),r&&(window.removeEventListener("mousemove",mousemove),r=!1))}function e(){q.clearRect(0,0,l,m),q.fillStyle="rgba(250,250,250,0.8)",q.beginPath();for(var a=0;h>a;a++){var b=k[a];q.moveTo(b.x,b.y),q.arc(b.x,b.y,b.size,0,j,!0)}q.fill(),g(),requestAnimationFrame(e)}function f(a,b,c,d,e){return(a-b)*(e-d)/(c-b)+d}function g(){for(var a=0;h>a;a++){var b=k[a];b.angle+=.01,b.y+=Math.cos(b.weight)+i.y+b.size/2,b.x+=Math.sin(b.angle)+i.x,(b.x>l+5||b.x<-5||b.y>m)&&(a%3>0?(b.x=Math.random()*l,b.y=-5):b.x>n?(b.x=-5,b.y=Math.random()*m):(b.x=l+5,b.y=Math.random()*m))}}var h=75,i={x:2,y:1},j=2*Math.PI,k=[],l=window.innerWidth,m=window.innerHeight,n=l/2,o={x:0,y:0},p=document.createElement("canvas"),q=p.getContext("2d");p.className="snow",a();var r=!0}};butter.initialize(),butter.getAndroidVersion(),butter.updateDownloads(navigator.platform,navigator.userAgent),butter.updateStatus("#status","https://butterproject.statuspage.io/api/v1/status.json"),butter.smoothScroll(),(11===(mnth=(new Date).getMonth())||0===mnth)&&butter.snow();